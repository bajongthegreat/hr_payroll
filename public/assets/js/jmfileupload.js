!function(e){"use strict";e.fn.jmFileUpload=function(o){function r(e){var r=!1;return n(e,o.allowedTypes)===!0&&(r=!0),r}function t(n){e(o.progressbarContainer).show(),e(o.infoContainer).append("<div> <strong>[3]</strong> Uploading file... </div>");var r=new XMLHttpRequest;r.open(o.type,o.url),r.onload=function(){200===r.status?console.log("all done: "+r.status):console.log("Something went terribly wrong...")},r.upload.onprogress=function(n){if(n.lengthComputable){var r=n.loaded/n.total*100|0;e(o.progressbar).css("width",r+"%").html(r+"%"),100==r&&setTimeout(function(){e(o.progressbarContainer).hide()},2e3)}},r.onload=function(){var n=r.response;n||e(o.errorContainer).html("Failed to process uploaded file."),e(o.infoContainer).append("<div> <strong>[4]</strong> Fetched uploaded file data. </div>"),n=JSON.parse(n),e(o.responseContainer).val(n.file_path).change(),e(o.imageContainer).attr("src",n.file_loc)},r.send(n)}var a={allowedTypes:["image/jpeg","image/png"],progressbarContainer:".progress",progressbar:".progress-bar",xhrReponseContainer:".result",type:"POST",url:"?a=upload",customData:{},infoContainer:".upload-info",errorContainer:".upload-error",responseContainer:".upload-done",imageContainer:".image"};return o=e.extend({},a,o),e(o.progressbarContainer).hide(),this.on("change",function(n){var a=n.target.files[0].type,i=e(this).prop("files")[0],s=new FormData;return e(o.infoContainer).html("<div><strong>[1]</strong> Validating file...</div>"),r(a)===!1?(console.log(a),e(o.errorContainer).html("File does not pass from the required file types."),e(o.infoContainer).append('<br><span class="glyphicon glyphicon-remove"></span> File does not pass from the required file types.'),!1):(e(o.progressbar).css("width","0%").html("0%"),e(o.infoContainer).append("<strong>[2]</strong> Assigning variables..."),s.append("file",i),e.each(o.customData,function(e,n){s.append(e,n)}),t(s),void 0)}),this};var n=function(e,n){for(var o=!1,r=n.length-1;r>=0;r--)n[r]==e&&(o=!0);return o}}(jQuery,document,window);