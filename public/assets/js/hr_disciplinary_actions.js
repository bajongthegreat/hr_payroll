function ordinal_suffix_of(e){var a=e%10,o=e%100;return 1==a&&11!=o?e+"st":2==a&&12!=o?e+"nd":3==a&&13!=o?e+"rd":e+"th"}function _searchEmployee(e,a,o){console.log("searching..."),void 0==o&&(o=0),$.ajax({type:"GET",url:_globalObj._baseURL+"/employees",data:{src:e,output:"json"},beforeSend:function(){$("#employee_loader").html('<img src="'+_globalObj.loaderImage+'" class="loading" >')},success:function(e){$("#employee_loader").html(""),$(".employee_loader").html("");var o,t,n="",i="";if(console.log("Length of data found:"+e.length),e.length>1){e.length<__rowsToDisplay&&(__rowsToDisplay=e.length);for(var l=0;__rowsToDisplay>l;l++)o=hrApp.personName(e[l]),t=e[l].employee_work_id,n=0==l?"active":"",i+='<div class="resultItem '+n+'" data-index="'+l+'"  data-employee_name="'+o+'" data-employee_id="'+t+'"><a href="?reload=true&employee_id='+t+"#employee="+t+'"> <span class="id-container">'+t+"</span>  "+o+"  </div></a>";a?($(".resultContainer").remove(),a.after('<div class="resultContainer" style="width: 330px;">'+i+"</div>"),_togglePanels(__panelsToToggle,"hide")):(resultContainer.html(i),resultContainer.show(),_togglePanels(__panelsToToggle,"hide"))}else 1==e.length?(realID=e[0].id,t=e[0].employee_work_id,o=hrApp.personName(e[0]),date_hired=e[0].date_hired,position=e.hasOwnProperty("position")?e[0].position.name:"Unassigned",a||(window.location="#employee="+t,$("#employee_name").html(o),$("#date_hired").html(date_hired),$("#position").html(position),$(".sss_id").html(e[0].sss_id),hiddenID.val(realID),$("#work_id").val(t),console.log(realID),_togglePanels(__panelsToToggle,"show"))):(a?$(".resultContainer").html('<span class="text-center">No data found</span>'):resultContainer.hide(),_togglePanels(__panelsToToggle,"hide"),$("#employee_loader").html('<span class="label label-danger">No data found</span>'))}})}function _togglePanels(e,a){$.each(e,function(e,o){"hide"==a?(console.log(o),$(o).hide()):$(o).show()})}function _emptyFields(){}$(".resultContainer").hide(),hrApp.hasHash()&&(__employee=hrApp.getHash("employee"),$("#employee_work_id").val(hrApp.getHash("employee")),_searchEmployee(__employee)),_togglePanels(__panelsToToggle,"hide"),$("#employee_work_id").keyup(function(e){e.preventDefault();var a=$(this).val();13==e.which&&(_searchEmployee(a),console.log("hello"))}),$(document).on("click",".resultItem a",function(e){if(redirect===!1){var a=$(this).parent().data("employee_id"),o=$(this).parent().data("employee_name"),t=$(this).parent().parent().siblings("input.searcheable");$(".resultName").remove(),t.val(a),t.next().remove(),t.parent().find(".input-group-addon").remove(),t.after('<span class="input-group-addon"><span class="label label-info">'+o+"</span></span>"),$(".resultContainer").remove(),e.preventDefault()}}),$(document).on("keyup",".searcheable",function(e){if($(this).val().length>1)if(40==e.which){{var a=$(".resultContainer .resultItem");$(".resultContainer .resultItem .active")}if(a.hasClass("active")){var o=$(".resultItem.active").data("index");a.eq(o).removeClass("active"),a.eq(o+1).addClass("active"),console.log(o)}}else if(38==e.which){{var a=$(".resultContainer .resultItem");$(".resultContainer .resultItem .active")}if(a.hasClass("active")){var o=$(".resultItem.active").data("index");a.eq(o).removeClass("active"),a.eq(o-1).addClass("active"),console.log(o)}}else{if(13==e.which){var a=$(".resultContainer .resultItem");return a.each(function(){if($(this).hasClass("active")){var e=$(this).data("employee_id"),e=$(this).data("employee_id"),a=$(this).data("employee_name"),o=$(this).parent().siblings("input.searcheable");$(".resultName").remove(),o.val(e),o.next().remove(),o.parent().find(".input-group-addon").remove(),o.after('<span class="input-group-addon"><span class="label label-info">'+a+"</span></span>"),$(".resultContainer").remove()}}),e.preventDefault(),!1}_searchEmployee($(this).val(),$(this))}else $(".resultContainer").remove();console.log(e.which)}),function(){$("#violation_date").on("dp.change",function(e){$("#violation_effectivity_date").data("DateTimePicker").setMinDate(e.date)}),$("#violation_effectivity_date").on("dp.change",function(e){$("#violation_date").data("DateTimePicker").setMaxDate(e.date)});var e=function(e,o,t){e===!0&&(console.log(o===!0),t===!0?a(!0):a(!1),o===!0?$("#violation_effectivity_date").prop("disabled",!0):$("#violation_effectivity_date").prop("disabled",!1))},a=function(e){e===!0?($("#violation_effectivity_date").prop("disabled",!0),$("#violation_date").prop("disabled",!0),$("#buttons").hide()):($("#violation_effectivity_date").prop("disabled",!1),$("#violation_date").prop("disabled",!1),$("#buttons").show())};$("#violation_decription_container").hide(),$("#violation_id").on("change",function(){var a=$(this).val(),o=$(".hiddenID").val();return console.log(a),0==a||-1==a?!1:($.ajax({type:"GET",url:_globalObj._baseURL+"/violations",data:{src:a,output:"json",field:"id",employee_id:o},success:function(a){console.log(a);var o=!1;if(a){var t=$(".violation_decription").html(a.description).text();$(".violation_decription").html("<br><br>"+t);var n="<ul>";n+="<br>";for(var i=0;i<a.offenses.length;i++)n+="<li>",a.times_committed-1==i&&(n+='<span class="label label-danger">'),a.offenses[i].days_of_suspension?(n+=ordinal_suffix_of(a.offenses[i].offense_number)+" offense ("+a.offenses[i].punishment_type+" for "+a.offenses[i].days_of_suspension+" days)",o=!0):(n+=ordinal_suffix_of(a.offenses[i].offense_number)+" offense ("+a.offenses[i].punishment_type+")",o=!1),a.times_committed-1==i&&(n+="</span>"),n+="</li>";if(n+="</ul>",void 0===typeof l)var l=!0;if(l===!0)e(!0,a.is_next_a_warning,a.is_last);else{var s=$(".old_violation_id").val(),r=$("#violation_id").val();s==r?e(!0,a.is_current_a_warning,!1):e(!0,a.is_current_a_warning,a.is_last)}console.log(a),$(".penalty").html(n),$("#violation_decription_container").show()}else $(".violation_decription").hide(),$("#violation_decription_container").hide()}}),void 0)})}(),function(){0!=$("#violation_id").val()&&setTimeout(function(){$("#violation_id").trigger("change")},1500),$("#duration_in_months, #loan_amount").on("keyup",function(){var e=parseInt($("#duration_in_months").val()),a=parseFloat($("#loan_amount").val()),o=Math.round(a/e*1.1*100)/100;isNaN(o)&&(o=0),$("#monthly_amortization").val(o)})}();